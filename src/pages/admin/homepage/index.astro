---
import AdminLayout from '../../../layouts/AdminLayout.astro';
---

<AdminLayout title="Homepage Settings" activeTab="homepage">
  <!-- Section Tabs -->
  <div class="hp-tabs">
    <button class="hp-tab active" data-tab="hero">
      <i class="fas fa-rocket"></i>
      <span>Hero</span>
    </button>
    <button class="hp-tab" data-tab="about">
      <i class="fas fa-user"></i>
      <span>About</span>
    </button>
    <button class="hp-tab" data-tab="contact">
      <i class="fas fa-envelope"></i>
      <span>Contact</span>
    </button>
    <button class="hp-tab" data-tab="seo">
      <i class="fas fa-search"></i>
      <span>SEO & Social</span>
    </button>
  </div>

  <!-- Loading State -->
  <div class="hp-loading" id="hp-loading">
    <div class="loading-spinner"></div>
    <p>Loading homepage settings...</p>
  </div>

  <!-- ===================== HERO SECTION ===================== -->
  <div class="hp-section active" id="section-hero">
    <div class="hp-card">
      <div class="hp-card-header">
        <div class="hp-card-title-group">
          <div class="hp-card-icon hero-icon"><i class="fas fa-rocket"></i></div>
          <div>
            <h2>Hero Section</h2>
            <p class="hp-card-subtitle">Configure hero banner, greeting text, and CTA</p>
          </div>
        </div>
        <div class="hp-card-actions">
          <span class="hp-status" id="hero-status"></span>
        </div>
      </div>
      <form id="hero-form" class="hp-form">
        <div class="hp-form-grid">
          <div class="form-group">
            <label for="hero-greeting">Greeting Text</label>
            <input type="text" id="hero-greeting" placeholder="Hi There,">
          </div>
          <div class="form-group">
            <label for="hero-name">Full Name</label>
            <input type="text" id="hero-name" placeholder="Your Name">
          </div>
          <div class="form-group">
            <label for="hero-subtitle">Subtitle</label>
            <input type="text" id="hero-subtitle" placeholder="I Am Into">
          </div>
          <div class="form-group">
            <label for="hero-cta-text">CTA Button Text</label>
            <input type="text" id="hero-cta-text" placeholder="About Me">
          </div>
          <div class="form-group">
            <label for="hero-cta-link">CTA Button Link</label>
            <input type="text" id="hero-cta-link" placeholder="#about">
          </div>
        </div>

        <!-- Typing Texts -->
        <div class="form-group hp-full-width">
          <label>Typing Animation Texts</label>
          <div class="hp-typing-texts" id="typing-texts-container">
            <!-- Dynamic items inserted here -->
          </div>
          <button type="button" class="hp-add-item-btn" id="add-typing-text">
            <i class="fas fa-plus"></i> Add Typing Text
          </button>
        </div>

        <!-- Hero Image -->
        <div class="form-group hp-full-width">
          <label>Hero Image</label>
          <div class="hp-image-upload" id="hero-image-upload">
            <div class="hp-image-preview" id="hero-image-preview" style="display:none;">
              <img id="hero-image-img" alt="Hero Preview">
              <button type="button" class="hp-image-remove" id="hero-image-remove">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="hp-image-dropzone" id="hero-image-dropzone">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Drag & drop or click to upload</p>
              <span>JPG, PNG, WebP (max 5MB)</span>
              <input type="file" id="hero-image-file" accept="image/jpeg,image/png,image/webp" style="display:none;">
            </div>
            <div class="hp-image-progress" id="hero-image-progress" style="display:none;">
              <div class="progress-bar"><div class="progress-fill" id="hero-progress-fill"></div></div>
              <span class="progress-text" id="hero-progress-text">Uploading...</span>
            </div>
            <input type="hidden" id="hero-heroImage">
          </div>
        </div>

        <div class="form-group hp-full-width">
          <label for="hero-heroImageAlt">Hero Image Alt Text</label>
          <input type="text" id="hero-heroImageAlt" placeholder="Descriptive alt text for hero image">
        </div>

        <div class="hp-form-actions">
          <button type="submit" class="hp-save-btn">
            <i class="fas fa-save"></i> Save Hero Settings
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===================== ABOUT SECTION ===================== -->
  <div class="hp-section" id="section-about">
    <div class="hp-card">
      <div class="hp-card-header">
        <div class="hp-card-title-group">
          <div class="hp-card-icon about-icon"><i class="fas fa-user"></i></div>
          <div>
            <h2>About Section</h2>
            <p class="hp-card-subtitle">Personal info, bio, and resume link</p>
          </div>
        </div>
        <div class="hp-card-actions">
          <span class="hp-status" id="about-status"></span>
        </div>
      </div>
      <form id="about-form" class="hp-form">
        <div class="hp-form-grid">
          <div class="form-group">
            <label for="about-title">Title</label>
            <input type="text" id="about-title" placeholder="I'm Your Name">
          </div>
          <div class="form-group">
            <label for="about-subtitle">Subtitle / Role</label>
            <input type="text" id="about-subtitle" placeholder="Web Developer">
          </div>
          <div class="form-group">
            <label for="about-email">Email</label>
            <input type="email" id="about-email" placeholder="you@example.com">
          </div>
          <div class="form-group">
            <label for="about-location">Location</label>
            <input type="text" id="about-location" placeholder="City, Country">
          </div>
        </div>

        <div class="form-group hp-full-width">
          <label for="about-bio">Bio</label>
          <textarea id="about-bio" rows="5" placeholder="Write your bio here..."></textarea>
        </div>

        <div class="hp-form-grid">
          <div class="form-group">
            <label for="about-resumeUrl">Resume URL</label>
            <input type="url" id="about-resumeUrl" placeholder="https://drive.google.com/...">
          </div>
          <div class="form-group">
            <label for="about-resumeText">Resume Button Text</label>
            <input type="text" id="about-resumeText" placeholder="Resume">
          </div>
        </div>

        <!-- Profile Image -->
        <div class="form-group hp-full-width">
          <label for="about-profileImage">Profile Image Path</label>
          <input type="text" id="about-profileImage" placeholder="/assets/images/profile.webp">
        </div>
        <div class="form-group hp-full-width">
          <label for="about-profileImageAlt">Profile Image Alt Text</label>
          <input type="text" id="about-profileImageAlt" placeholder="Your Name - Web Developer">
        </div>

        <div class="hp-form-actions">
          <button type="submit" class="hp-save-btn">
            <i class="fas fa-save"></i> Save About Settings
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===================== CONTACT SECTION ===================== -->
  <div class="hp-section" id="section-contact">
    <div class="hp-card">
      <div class="hp-card-header">
        <div class="hp-card-title-group">
          <div class="hp-card-icon contact-icon"><i class="fas fa-envelope"></i></div>
          <div>
            <h2>Contact Section</h2>
            <p class="hp-card-subtitle">Configure contact section image</p>
          </div>
        </div>
        <div class="hp-card-actions">
          <span class="hp-status" id="contact-status"></span>
        </div>
      </div>
      <form id="contact-form" class="hp-form">
        <div class="form-group hp-full-width">
          <label for="contact-contactImage">Contact Image Path</label>
          <input type="text" id="contact-contactImage" placeholder="/assets/images/contact.png">
        </div>
        <div class="form-group hp-full-width">
          <label for="contact-contactImageAlt">Contact Image Alt Text</label>
          <input type="text" id="contact-contactImageAlt" placeholder="Contact illustration alt text">
        </div>

        <div class="hp-form-actions">
          <button type="submit" class="hp-save-btn">
            <i class="fas fa-save"></i> Save Contact Settings
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===================== SEO SECTION ===================== -->
  <div class="hp-section" id="section-seo">
    <div class="hp-card">
      <div class="hp-card-header">
        <div class="hp-card-title-group">
          <div class="hp-card-icon seo-icon"><i class="fas fa-search"></i></div>
          <div>
            <h2>SEO & Social Links</h2>
            <p class="hp-card-subtitle">Structured data, meta info, and social profiles</p>
          </div>
        </div>
        <div class="hp-card-actions">
          <span class="hp-status" id="seo-status"></span>
        </div>
      </div>
      <form id="seo-form" class="hp-form">
        <!-- Personal Info -->
        <div class="hp-form-section-label">
          <i class="fas fa-id-card"></i> Personal Info
        </div>
        <div class="hp-form-grid">
          <div class="form-group">
            <label for="seo-name">Full Name</label>
            <input type="text" id="seo-name" placeholder="Your Name">
          </div>
          <div class="form-group">
            <label for="seo-jobTitle">Job Title</label>
            <input type="text" id="seo-jobTitle" placeholder="Full-Stack Web Developer">
          </div>
          <div class="form-group">
            <label for="seo-email">Email</label>
            <input type="email" id="seo-email" placeholder="you@example.com">
          </div>
          <div class="form-group">
            <label for="seo-telephone">Phone</label>
            <input type="text" id="seo-telephone" placeholder="+880...">
          </div>
        </div>

        <div class="form-group hp-full-width">
          <label for="seo-description">Meta Description</label>
          <textarea id="seo-description" rows="3" placeholder="A short description for SEO..."></textarea>
        </div>

        <!-- Location -->
        <div class="hp-form-section-label">
          <i class="fas fa-map-marker-alt"></i> Location
        </div>
        <div class="hp-form-grid">
          <div class="form-group">
            <label for="seo-addressLocality">City / Locality</label>
            <input type="text" id="seo-addressLocality" placeholder="Nowabgonj">
          </div>
          <div class="form-group">
            <label for="seo-addressRegion">Region / State</label>
            <input type="text" id="seo-addressRegion" placeholder="Dhaka">
          </div>
          <div class="form-group">
            <label for="seo-addressCountry">Country Code</label>
            <input type="text" id="seo-addressCountry" placeholder="BD">
          </div>
          <div class="form-group">
            <label for="seo-nationality">Nationality</label>
            <input type="text" id="seo-nationality" placeholder="Bangladesh">
          </div>
        </div>

        <!-- Education -->
        <div class="hp-form-section-label">
          <i class="fas fa-university"></i> University
        </div>
        <div class="hp-form-grid">
          <div class="form-group">
            <label for="seo-university">University Name</label>
            <input type="text" id="seo-university" placeholder="University Name">
          </div>
          <div class="form-group">
            <label for="seo-universityUrl">University URL</label>
            <input type="url" id="seo-universityUrl" placeholder="https://...">
          </div>
        </div>

        <!-- Social Links -->
        <div class="hp-form-section-label">
          <i class="fas fa-share-alt"></i> Social Profiles
        </div>
        <div class="hp-form-grid">
          <div class="form-group">
            <label for="seo-github"><i class="fab fa-github"></i> GitHub</label>
            <input type="url" id="seo-github" placeholder="https://github.com/...">
          </div>
          <div class="form-group">
            <label for="seo-linkedin"><i class="fab fa-linkedin"></i> LinkedIn</label>
            <input type="url" id="seo-linkedin" placeholder="https://linkedin.com/in/...">
          </div>
          <div class="form-group">
            <label for="seo-twitter"><i class="fab fa-twitter"></i> Twitter</label>
            <input type="url" id="seo-twitter" placeholder="https://twitter.com/...">
          </div>
          <div class="form-group">
            <label for="seo-facebook"><i class="fab fa-facebook"></i> Facebook</label>
            <input type="url" id="seo-facebook" placeholder="https://facebook.com/...">
          </div>
          <div class="form-group">
            <label for="seo-instagram"><i class="fab fa-instagram"></i> Instagram</label>
            <input type="url" id="seo-instagram" placeholder="https://instagram.com/...">
          </div>
          <div class="form-group">
            <label for="seo-telegram"><i class="fab fa-telegram"></i> Telegram</label>
            <input type="url" id="seo-telegram" placeholder="https://t.me/...">
          </div>
        </div>

        <div class="hp-form-actions">
          <button type="submit" class="hp-save-btn">
            <i class="fas fa-save"></i> Save SEO & Social Settings
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script is:inline>
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(initHomepagePage, 500);
    });

    // ======= IMAGE COMPRESSION =======
    async function compressImageHP(file, maxWidth = 1200, quality = 0.85) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = (e) => {
          const img = new Image();
          img.onload = () => {
            const canvas = document.createElement('canvas');
            let { width, height } = img;
            if (width > maxWidth) {
              height = Math.round((height * maxWidth) / width);
              width = maxWidth;
            }
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';
            ctx.drawImage(img, 0, 0, width, height);
            canvas.toBlob(
              (blob) => blob ? resolve({ blob, width, height, originalSize: file.size, compressedSize: blob.size }) : reject(new Error('Compression failed')),
              'image/webp', quality
            );
          };
          img.onerror = () => reject(new Error('Failed to load image'));
          img.src = e.target.result;
        };
        reader.onerror = () => reject(new Error('Failed to read file'));
        reader.readAsDataURL(file);
      });
    }

    function initHomepagePage() {
      const supabase = window.supabaseClient;
      if (!supabase) { setTimeout(initHomepagePage, 200); return; }

      // Store data
      let sectionsData = {};

      // ======= TAB SWITCHING =======
      const tabs = document.querySelectorAll('.hp-tab');
      const sections = document.querySelectorAll('.hp-section');

      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          sections.forEach(s => s.classList.remove('active'));
          tab.classList.add('active');
          document.getElementById('section-' + tab.dataset.tab).classList.add('active');
        });
      });

      // ======= LOAD ALL SETTINGS =======
      loadAllSettings();

      async function loadAllSettings() {
        const loading = document.getElementById('hp-loading');
        try {
          const { data, error } = await supabase
            .from('homepage_settings')
            .select('*')
            .order('sort_order');

          if (error) throw error;

          loading.style.display = 'none';

          if (data) {
            data.forEach(row => {
              sectionsData[row.section] = row;
              populateSection(row.section, row.content);
            });
          }
        } catch (err) {
          loading.innerHTML = '<i class="fas fa-exclamation-circle" style="font-size:24px;color:#ef4444;"></i><p>Failed to load settings</p>';
          console.error(err);
        }
      }

      // ======= POPULATE SECTIONS =======
      function populateSection(section, content) {
        if (!content) return;

        if (section === 'hero') {
          setVal('hero-greeting', content.greeting);
          setVal('hero-name', content.name);
          setVal('hero-subtitle', content.subtitle);
          setVal('hero-cta-text', content.ctaText);
          setVal('hero-cta-link', content.ctaLink);
          setVal('hero-heroImage', content.heroImage);
          setVal('hero-heroImageAlt', content.heroImageAlt);

          // Show hero image preview if exists
          if (content.heroImage) {
            showHeroImagePreview(content.heroImage);
          }

          // Populate typing texts
          const container = document.getElementById('typing-texts-container');
          container.innerHTML = '';
          if (content.typingTexts && content.typingTexts.length > 0) {
            content.typingTexts.forEach(text => addTypingTextItem(text));
          }
        }

        if (section === 'about') {
          setVal('about-title', content.title);
          setVal('about-subtitle', content.subtitle);
          setVal('about-email', content.email);
          setVal('about-location', content.location);
          setVal('about-bio', content.bio);
          setVal('about-resumeUrl', content.resumeUrl);
          setVal('about-resumeText', content.resumeText);
          setVal('about-profileImage', content.profileImage);
          setVal('about-profileImageAlt', content.profileImageAlt);
        }

        if (section === 'contact') {
          setVal('contact-contactImage', content.contactImage);
          setVal('contact-contactImageAlt', content.contactImageAlt);
        }

        if (section === 'seo') {
          const seoFields = ['name','jobTitle','email','telephone','description',
            'addressLocality','addressRegion','addressCountry','nationality',
            'university','universityUrl','github','linkedin','twitter',
            'facebook','instagram','telegram'];
          seoFields.forEach(f => setVal('seo-' + f, content[f]));
        }
      }

      function setVal(id, value) {
        const el = document.getElementById(id);
        if (el && value != null) el.value = value;
      }

      function getVal(id) {
        const el = document.getElementById(id);
        return el ? el.value.trim() : '';
      }

      // ======= TYPING TEXTS MANAGEMENT =======
      function addTypingTextItem(value = '') {
        const container = document.getElementById('typing-texts-container');
        const item = document.createElement('div');
        item.className = 'hp-typing-item';
        item.innerHTML = `
          <i class="fas fa-grip-vertical hp-drag-handle"></i>
          <input type="text" value="${value}" placeholder="e.g., web development" class="typing-text-input">
          <button type="button" class="hp-remove-item" title="Remove">
            <i class="fas fa-times"></i>
          </button>
        `;
        item.querySelector('.hp-remove-item').addEventListener('click', () => {
          item.classList.add('removing');
          setTimeout(() => item.remove(), 200);
        });
        container.appendChild(item);
      }

      document.getElementById('add-typing-text').addEventListener('click', () => addTypingTextItem(''));

      function getTypingTexts() {
        return Array.from(document.querySelectorAll('.typing-text-input'))
          .map(input => input.value.trim())
          .filter(t => t);
      }

      // ======= HERO IMAGE UPLOAD =======
      const heroDropzone = document.getElementById('hero-image-dropzone');
      const heroFileInput = document.getElementById('hero-image-file');
      const heroPreview = document.getElementById('hero-image-preview');
      const heroImgEl = document.getElementById('hero-image-img');
      const heroRemoveBtn = document.getElementById('hero-image-remove');
      const heroProgress = document.getElementById('hero-image-progress');
      const heroProgressFill = document.getElementById('hero-progress-fill');
      const heroProgressText = document.getElementById('hero-progress-text');

      heroDropzone.addEventListener('click', () => heroFileInput.click());

      ['dragenter','dragover','dragleave','drop'].forEach(e => {
        heroDropzone.addEventListener(e, (ev) => { ev.preventDefault(); ev.stopPropagation(); });
      });
      ['dragenter','dragover'].forEach(e => {
        heroDropzone.addEventListener(e, () => heroDropzone.parentElement.classList.add('dragover'));
      });
      ['dragleave','drop'].forEach(e => {
        heroDropzone.addEventListener(e, () => heroDropzone.parentElement.classList.remove('dragover'));
      });

      heroDropzone.addEventListener('drop', (e) => {
        if (e.dataTransfer.files.length > 0) handleHeroImage(e.dataTransfer.files[0]);
      });

      heroFileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) handleHeroImage(e.target.files[0]);
      });

      heroRemoveBtn.addEventListener('click', () => {
        document.getElementById('hero-heroImage').value = '';
        heroPreview.style.display = 'none';
        heroDropzone.style.display = 'block';
        heroFileInput.value = '';
      });

      function showHeroImagePreview(url) {
        heroImgEl.src = url;
        heroPreview.style.display = 'block';
        heroDropzone.style.display = 'none';
        heroProgress.style.display = 'none';
      }

      async function handleHeroImage(file) {
        const validTypes = ['image/jpeg','image/png','image/webp'];
        if (!validTypes.includes(file.type)) {
          showToast('Please select JPG, PNG, or WebP', 'error');
          return;
        }
        if (file.size > 5 * 1024 * 1024) {
          showToast('Image must be under 5MB', 'error');
          return;
        }

        heroDropzone.style.display = 'none';
        heroPreview.style.display = 'none';
        heroProgress.style.display = 'block';
        heroProgressFill.style.width = '20%';
        heroProgressText.textContent = 'Compressing...';

        try {
          const compressed = await compressImageHP(file);
          heroProgressFill.style.width = '50%';
          heroProgressText.textContent = 'Uploading...';

          const timestamp = Date.now();
          const filename = `hero-${timestamp}.webp`;

          const { data, error } = await supabase.storage
            .from('homepage-images')
            .upload(filename, compressed.blob, {
              contentType: 'image/webp',
              cacheControl: '31536000',
              upsert: false
            });

          if (error) throw error;

          heroProgressFill.style.width = '90%';

          const { data: urlData } = supabase.storage
            .from('homepage-images')
            .getPublicUrl(filename);

          heroProgressFill.style.width = '100%';
          heroProgressText.textContent = 'Done!';

          setTimeout(() => {
            document.getElementById('hero-heroImage').value = urlData.publicUrl;
            showHeroImagePreview(urlData.publicUrl);
          }, 400);
        } catch (err) {
          showToast('Upload failed: ' + err.message, 'error');
          heroProgress.style.display = 'none';
          heroDropzone.style.display = 'block';
        }
      }

      // ======= FORM SUBMISSIONS =======
      // Hero Form
      document.getElementById('hero-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const content = {
          greeting: getVal('hero-greeting'),
          name: getVal('hero-name'),
          subtitle: getVal('hero-subtitle'),
          ctaText: getVal('hero-cta-text'),
          ctaLink: getVal('hero-cta-link'),
          heroImage: getVal('hero-heroImage'),
          heroImageAlt: getVal('hero-heroImageAlt'),
          typingTexts: getTypingTexts()
        };
        await saveSection('hero', content);
      });

      // About Form
      document.getElementById('about-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const content = {
          title: getVal('about-title'),
          subtitle: getVal('about-subtitle'),
          email: getVal('about-email'),
          location: getVal('about-location'),
          bio: getVal('about-bio'),
          resumeUrl: getVal('about-resumeUrl'),
          resumeText: getVal('about-resumeText'),
          profileImage: getVal('about-profileImage'),
          profileImageAlt: getVal('about-profileImageAlt')
        };
        await saveSection('about', content);
      });

      // Contact Form
      document.getElementById('contact-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const content = {
          contactImage: getVal('contact-contactImage'),
          contactImageAlt: getVal('contact-contactImageAlt')
        };
        await saveSection('contact', content);
      });

      // SEO Form
      document.getElementById('seo-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const content = {};
        const seoFields = ['name','jobTitle','email','telephone','description',
          'addressLocality','addressRegion','addressCountry','nationality',
          'university','universityUrl','github','linkedin','twitter',
          'facebook','instagram','telegram'];
        seoFields.forEach(f => {
          content[f] = getVal('seo-' + f);
        });
        await saveSection('seo', content);
      });

      // ======= SAVE SECTION =======
      async function saveSection(section, content) {
        const statusEl = document.getElementById(section + '-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
        statusEl.className = 'hp-status saving';

        try {
          const existing = sectionsData[section];
          let result;

          if (existing) {
            result = await supabase
              .from('homepage_settings')
              .update({ content, updated_at: new Date().toISOString() })
              .eq('id', existing.id);
          } else {
            result = await supabase
              .from('homepage_settings')
              .insert({ section, content, is_active: true });
          }

          if (result.error) throw result.error;

          // Refresh data
          const { data } = await supabase
            .from('homepage_settings')
            .select('*')
            .eq('section', section)
            .single();

          if (data) sectionsData[section] = data;

          statusEl.innerHTML = '<i class="fas fa-check-circle"></i> Saved';
          statusEl.className = 'hp-status saved';
          showToast(section.charAt(0).toUpperCase() + section.slice(1) + ' settings saved!', 'success');

          setTimeout(() => {
            statusEl.innerHTML = '';
            statusEl.className = 'hp-status';
          }, 3000);
        } catch (err) {
          statusEl.innerHTML = '<i class="fas fa-exclamation-circle"></i> Error';
          statusEl.className = 'hp-status error';
          showToast('Failed to save: ' + err.message, 'error');
          console.error(err);
        }
      }
    }

    function showToast(message, type) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast ${type} show`;
      setTimeout(() => toast.classList.remove('show'), 3000);
    }
  </script>

  <style is:global>
    /* ===================== HOMEPAGE ADMIN STYLES ===================== */

    /* Tabs */
    .hp-tabs {
      display: flex;
      gap: 4px;
      background: white;
      padding: 6px;
      border-radius: 14px;
      margin-bottom: 28px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      border: 1px solid var(--admin-gray-200);
    }

    .hp-tab {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 20px;
      background: none;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      color: var(--admin-gray-500);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .hp-tab:hover {
      color: var(--admin-gray-700);
      background: var(--admin-gray-50);
    }

    .hp-tab.active {
      background: var(--admin-primary);
      color: white;
      box-shadow: 0 2px 8px rgba(43,61,218,0.3);
    }

    .hp-tab i {
      font-size: 15px;
    }

    /* Loading */
    .hp-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 20px;
      color: var(--admin-gray-500);
      gap: 16px;
    }

    /* Sections */
    .hp-section {
      display: none;
    }

    .hp-section.active {
      display: block;
      animation: hpFadeIn 0.3s ease;
    }

    @keyframes hpFadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Card */
    .hp-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      border: 1px solid var(--admin-gray-200);
      overflow: hidden;
    }

    .hp-card-header {
      padding: 24px 28px;
      border-bottom: 1px solid var(--admin-gray-100);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--admin-gray-50);
    }

    .hp-card-title-group {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .hp-card-icon {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .hp-card-icon.hero-icon {
      background: rgba(59,130,246,0.1);
      color: #3b82f6;
    }

    .hp-card-icon.about-icon {
      background: rgba(16,185,129,0.1);
      color: #10b981;
    }

    .hp-card-icon.contact-icon {
      background: rgba(245,158,11,0.1);
      color: #f59e0b;
    }

    .hp-card-icon.seo-icon {
      background: rgba(139,92,246,0.1);
      color: #8b5cf6;
    }

    .hp-card-header h2 {
      font-size: 18px;
      font-weight: 600;
      color: var(--admin-gray-900);
      margin: 0;
    }

    .hp-card-subtitle {
      font-size: 13px;
      color: var(--admin-gray-500);
      margin: 2px 0 0 0;
    }

    /* Status Badge */
    .hp-status {
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      border-radius: 20px;
      transition: all 0.3s;
    }

    .hp-status.saving {
      background: rgba(43,61,218,0.1);
      color: var(--admin-primary);
    }

    .hp-status.saved {
      background: rgba(16,185,129,0.1);
      color: var(--admin-success);
    }

    .hp-status.error {
      background: rgba(239,68,68,0.1);
      color: var(--admin-danger);
    }

    /* Form */
    .hp-form {
      padding: 28px;
    }

    .hp-form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 20px;
    }

    .hp-full-width {
      margin-bottom: 20px;
    }

    .hp-form .form-group label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      font-weight: 600;
      color: var(--admin-gray-600);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }

    .hp-form input[type="text"],
    .hp-form input[type="email"],
    .hp-form input[type="url"],
    .hp-form textarea {
      width: 100%;
      padding: 11px 14px;
      border: 1px solid var(--admin-gray-200);
      border-radius: 10px;
      font-size: 14px;
      font-family: inherit;
      background: var(--admin-gray-50);
      color: var(--admin-gray-900);
      transition: all 0.2s;
    }

    .hp-form input:focus,
    .hp-form textarea:focus {
      outline: none;
      border-color: var(--admin-primary);
      background: white;
      box-shadow: 0 0 0 3px rgba(43,61,218,0.08);
    }

    .hp-form textarea {
      resize: vertical;
      min-height: 80px;
    }

    /* Form Section Labels */
    .hp-form-section-label {
      font-size: 13px;
      font-weight: 700;
      color: var(--admin-gray-500);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 16px 0 12px;
      margin-bottom: 4px;
      border-top: 1px solid var(--admin-gray-100);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hp-form-section-label:first-child {
      border-top: none;
      padding-top: 0;
    }

    .hp-form-section-label i {
      color: var(--admin-gray-400);
    }

    /* Save Button */
    .hp-form-actions {
      padding-top: 24px;
      border-top: 1px solid var(--admin-gray-100);
      margin-top: 8px;
      display: flex;
      justify-content: flex-end;
    }

    .hp-save-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 28px;
      background: linear-gradient(135deg, var(--admin-primary) 0%, var(--admin-primary-light) 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(43,61,218,0.25);
    }

    .hp-save-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(43,61,218,0.35);
    }

    .hp-save-btn:active {
      transform: translateY(0);
    }

    /* Typing Texts */
    .hp-typing-texts {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 12px;
    }

    .hp-typing-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 4px;
      border-radius: 10px;
      background: var(--admin-gray-50);
      border: 1px solid var(--admin-gray-200);
      transition: all 0.2s;
    }

    .hp-typing-item:hover {
      border-color: var(--admin-gray-300);
    }

    .hp-typing-item.removing {
      opacity: 0;
      transform: translateX(-20px);
    }

    .hp-drag-handle {
      color: var(--admin-gray-300);
      cursor: grab;
      padding: 8px;
      font-size: 12px;
    }

    .hp-typing-item input {
      flex: 1;
      padding: 10px 12px;
      border: none;
      background: transparent;
      font-size: 14px;
      color: var(--admin-gray-900);
      font-family: inherit;
    }

    .hp-typing-item input:focus {
      outline: none;
    }

    .hp-remove-item {
      width: 32px;
      height: 32px;
      border: none;
      background: none;
      color: var(--admin-gray-400);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .hp-remove-item:hover {
      background: rgba(239,68,68,0.1);
      color: var(--admin-danger);
    }

    .hp-add-item-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      border: 2px dashed var(--admin-gray-300);
      background: none;
      border-radius: 10px;
      color: var(--admin-gray-500);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .hp-add-item-btn:hover {
      border-color: var(--admin-primary);
      color: var(--admin-primary);
      background: rgba(43,61,218,0.04);
    }

    /* Hero Image Upload */
    .hp-image-upload {
      border: 2px dashed var(--admin-gray-300);
      border-radius: 12px;
      overflow: hidden;
      background: var(--admin-gray-50);
      transition: all 0.3s;
    }

    .hp-image-upload.dragover {
      border-color: var(--admin-primary);
      background: rgba(43,61,218,0.04);
    }

    .hp-image-dropzone {
      padding: 36px 20px;
      text-align: center;
      cursor: pointer;
    }

    .hp-image-dropzone i {
      font-size: 36px;
      color: var(--admin-gray-300);
      margin-bottom: 10px;
      display: block;
      transition: all 0.3s;
    }

    .hp-image-upload:hover .hp-image-dropzone i {
      color: var(--admin-primary);
      transform: translateY(-4px);
    }

    .hp-image-dropzone p {
      font-size: 14px;
      font-weight: 500;
      color: var(--admin-gray-600);
      margin: 0 0 4px 0;
    }

    .hp-image-dropzone span {
      font-size: 12px;
      color: var(--admin-gray-400);
    }

    .hp-image-preview {
      position: relative;
      padding: 16px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .hp-image-preview img {
      width: 100%;
      max-height: 200px;
      object-fit: contain;
      border-radius: 8px;
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .hp-image-remove {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      border: none;
      color: var(--admin-danger);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: all 0.2s;
    }

    .hp-image-remove:hover {
      background: var(--admin-danger);
      color: white;
      transform: scale(1.1);
    }

    .hp-image-progress {
      padding: 20px;
      text-align: center;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hp-tabs {
        flex-direction: column;
      }

      .hp-form-grid {
        grid-template-columns: 1fr;
      }

      .hp-form {
        padding: 20px;
      }

      .hp-card-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }
    }
  </style>
</AdminLayout>
